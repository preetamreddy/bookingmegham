<h1>Listing Properties</h1>

<% if @properties.count > 0 %>
<table class="index_table" border="1">
  <tr>
   	<th class="text">Property</th>
   	<th class="text">City / Village</th>
		<th class="text">Ensure availability</th>
   	<th class="text">Email</th>
   	<th class="number">Driver</th>
   	<th class="number">Service tax rate</th>
		<th></th>
  </tr>

<% @properties.each do |property| %>
	<tr class="<%= cycle('list_line_odd', 'list_line_even') %>">
    <td class="nowrap">
    	<%= property.name %><br/>
			<%= property.phone_number %><br/>
			<%= property.phone_number_2 %>
		</td>
    <td class="text"><%= property.city %></td>
    <td class="text"><%= property.ensure_availability_before_booking.to_english %></td>
    <td class="text"><%= property.email %></td>
    <td class="currency"><%= number_to_currency(property.price_for_driver) %></td>
    <td class="number">
			<%= number_to_percentage(property.service_tax_rate, :precision => 2, 
						:strip_insignificant_zeros => true) %>
		</td>
    <td>
    	<%= link_to 'Show details', property %></br>
    	<%= link_to 'Edit', edit_property_path(property) %></br>
    	<%= link_to 'Destroy', property, confirm: 'Are you sure?', 
						method: :delete %></br>
			<%= link_to 'Room Types', room_types_path(:property_id => property.id) %>
		</td>
  </tr>
<% end %>
</table>
<% else %>
  <div id="error_explanation">
		<h2>Properties have not yet been created</h2>
		<ul>
			<li>Click below to create a new property</li>
		</ul>
  </div>
<% end %>

<div class="action_container">
	<%= link_to 'New Property', new_property_path %>
</div>
<p><%= will_paginate @properties %></p>
